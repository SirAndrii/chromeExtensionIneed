(()=>{"use strict";const e={HIGHLIGHT_WORDS:"stopWords",REMOVE_WORDS:"removeWords",COLORS:"colors",SELECTORS:"selectors"},t={[e.SELECTORS]:{SCROLLABLE_CONTAINER:"jobsearch-JobComponent",SKELETON_CLASS:"jobsearch-ViewJobSkeleton",REMOVE_TEST_ID:"viewJob-skeleton"},[e.COLORS]:{highlightColor:"#f3d381",backgroundColor:"#b0b0b0"},[e.REMOVE_WORDS]:["senior","lead","architect","java",".net","sr.","manager"],[e.HIGHLIGHT_WORDS]:["secret","clearance","citizen"]};function o(e){return`(${e.map((e=>e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))).join("|")})`}const r=e=>{const t=o(e),r=new RegExp(`\\b${t}\\b`,"gi"),n=Array.from(document.querySelectorAll("h2.jobTitle"));if(0===n.length)return;const c=n.filter((e=>r.test(e.textContent)));0!==c.length&&c.forEach((e=>{const t=e.closest("li");t&&t.remove()}))};function n(e,t,r="red"){const n=new RegExp(`${o(t)}`,"gi"),c=e.match(n);if(c){const t=[...new Set(c)];t.length>0&&t.forEach((t=>{e=e.replace(t,`@@@lt;span data-highlight="true" style="background: ${r}"@@@gt;${t}@@@lt;/span@@@gt;`)}))}return e}function c(e,t,o="red"){const r=e.match(/\d+\+? years/gi);if(r){const n=[...new Set(r)].filter((e=>parseInt(e)>=t));n.length>0&&n.forEach((t=>{e=e.replace(t,`@@@lt;span data-highlight="true" style="background: ${o}"@@@gt;${t}@@@lt;/span@@@gt;`)}))}return e}const{HIGHLIGHT_WORDS:s,REMOVE_WORDS:l,COLORS:a,SELECTORS:i}=e,h=Object.assign({},t);chrome.storage.sync.get([s,l,a,i],(e=>{chrome.runtime.lastError?console.error(chrome.runtime.lastError):(console.log(e),h[s]=e[s],h[l]=e[l],h[a]=e[a],h[i]=e[i])}));const g=()=>{const e=document.getElementsByClassName(h[i].SCROLLABLE_CONTAINER)[0];if(!e)return;const t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT);let o;for(;o=t.nextNode();)(null==o?void 0:o.textContent)&&(o.textContent=n(o.textContent,h[s],h[a].highlightColor),o.textContent=c(o.textContent,3,h[a].highlightColor));/data-highlight="true"/.test(e.innerHTML)&&(alert("hasHighlight"),e.innerHTML=e.innerHTML.replace(/(@@@lt;|@@@gt;)/g,(e=>"@@@lt;"===e?"<":">")),e.style.backgroundColor=h[a].backgroundColor,d(e))},d=e=>{const t=e.querySelector(".jobsearch-JobComponent-embeddedBody");if(t){const e=document.querySelector('[data-highlight="true"]');e&&(t.scrollTop=e.offsetTop-260)}else console.error("check selector '.jobsearch-JobComponent-embeddedBody'")};new MutationObserver((e=>{for(let t of e)"childList"===t.type&&t.removedNodes.forEach((e=>{e.nodeType!==Node.ELEMENT_NODE||!e.classList.contains(h[i].SKELETON_CLASS)&&e.getAttribute("data-testid")!==h[i].REMOVE_TEST_ID||(console.log("Skeleton removed!"),g(),r(h[l]))}))})).observe(document,{childList:!0,subtree:!0})})();