(()=>{"use strict";const e={HIGHLIGHT_WORDS:"stopWords",REMOVE_WORDS:"removeWords",COLORS:"colors",SELECTORS:"selectors"},o={[e.SELECTORS]:{SCROLLABLE_CONTAINER:"jobsearch-JobComponent",SKELETON_CLASS:"jobsearch-ViewJobSkeleton",REMOVE_TEST_ID:"viewJob-skeleton"},[e.COLORS]:{highlightColor:"#f3d381",backgroundColor:"#b0b0b0"},[e.REMOVE_WORDS]:["senior","lead","architect","java",".net","sr.","manager"],[e.HIGHLIGHT_WORDS]:["secret","clearance","citizen"]},{HIGHLIGHT_WORDS:t,REMOVE_WORDS:r,COLORS:n,SELECTORS:s}=e,c=Object.assign({},o);chrome.storage.sync.get([t,r,n,s],(e=>{chrome.runtime.lastError?console.error(chrome.runtime.lastError):(console.log(e),c[t]=e[t],c[r]=e[r],c[n]=e[n],c[s]=e[s])}));const l=()=>{var e;const o=document.getElementsByClassName(c[s].SCROLLABLE_CONTAINER)[0];if(!o)return;Array.isArray(c[t])&&(null===(e=c[t])||void 0===e||e.forEach((e=>function(e,o,t){if(!(o instanceof Node))return;const r=document.createTreeWalker(o,NodeFilter.SHOW_TEXT);let n,s=!1;const c=new RegExp(e,"gi");for(;n=r.nextNode();)(null==n?void 0:n.textContent)&&n.textContent.match(c)&&(s=!0,n.textContent=n.textContent.replace(c,`@@@${e}@@@`));s&&(o.innerHTML=o.innerHTML.replace(/@@@(.*?)@@@/g,`<span style="background-color: ${t.highlightColor}">$1</span>`),o.style.backgroundColor=t.backgroundColor)}(e,o,c[n]))));const r=o.querySelector(".jobsearch-JobComponent-embeddedBody");if(r){const e=r.querySelector(`span[style*="background-color: ${c[n].highlightColor}"]`);e&&(r.scrollTop=e.offsetTop-260)}else console.error("check selector '.jobsearch-JobComponent-embeddedBody'")},a=()=>{const e=/\b(senior|lead|architect|java|\.net|sr\.|manager|\.net)\b/gi,o=Array.from(document.querySelectorAll("h2.jobTitle"));if(0===o.length)return;const t=o.filter((o=>e.test(o.textContent)));0!==o.length&&t.forEach((e=>{const o=e.closest("li");o&&o.remove()}))};new MutationObserver((e=>{for(let o of e)"childList"===o.type&&o.removedNodes.forEach((e=>{console.log(e),e.nodeType!==Node.ELEMENT_NODE||!e.classList.contains(c[s].SKELETON_CLASS)&&e.getAttribute("data-testid")!==c[s].REMOVE_TEST_ID||(console.log("Skeleton removed!"),l(),a())}))})).observe(document,{childList:!0,subtree:!0})})();